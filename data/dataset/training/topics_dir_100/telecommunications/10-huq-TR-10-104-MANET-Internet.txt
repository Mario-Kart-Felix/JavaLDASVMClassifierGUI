Internet Connectivity for IPv6-Based
Mobile Ad Hoc Networks using
Cross-Layer Approach
Syed Maruful Huq, Mohammed Atiquzzaman,
Le Gruenwald
TR-OU-TNRL-10-104
July 2010
Telecommunication & Network Research Lab
School of Computer Science
THE UNIVERSITY OF OKLAHOMA
110 West Boyd Street, Room 260, Norman, Oklahoma 73019-6151
(405)-325-4042, atiq@ou.edu, www.cs.ou.edu/˜atiq
Internet Connectivity for IPv6-Based Mobile Ad
Hoc Networks using Cross-Layer Approach
Syed Maruful Huq, Mohammed Atiquzzaman and Le Gruenwald
Telecommunications and Networks Research Lab
School of Computer Science, University of Oklahoma, Norman, OK 73019
Email: {maruf, atiq, ggruenwald}@ou.edu
Abstract
A mobile ad hoc network (MANET) is a self-organizing network where mobile nodes can communicate with each other over
multiple hops. In military zones, MANETs are used because wireless infrastructured network is difficult to setup for maintaining
communication over large areas. With the advent of the Internet, necessity for global communication is also becoming a core
requirement for MANETs in such military areas. Therefore, Internet connectivity in MANETs has received significant attention in
the past few years. Routing packets efficiently within and outside a MANET is a challenge and much effort has been given to the
design of routing protocols to achieve higher packet delivery ratio (PDR) over Intra-MANET (packet traveling within MANET)
and Internet-MANET (packets traveling between MANET and Internet) traffic. However, most of these routing protocols use
information available at the network layer to route packets. In this paper, we have designed a cross-layered routing protocol by
exploiting the information gained at the link layer in addition to the information available at the network layer to achieve higher
PDR compared to existing protocols. Through simulations we have shown that cross-layered approach can achieve higher PDR
for Internet-MANET traffic.
Index Terms
IPv6; Cross-layer; MANET; Mobile IP; Global Connectivity
I. INTRODUCTION
A MANET is an autonomous network where nodes can communicate with each other over multiple hops. In remote military
zones, MANETs can provide wireless communication over a large area. This is because network coverage in MANETs is
not based on the wireless range of a central access point but on multi-hop communication, making the coverage of the
network virtually limitless. Internet connectivity in such MANETs has also become a topic of recent interest as majority
of the applications nowadays require Internet connectivity, and most MANET protocols inherently do not provide Internet
routing. With Internet connectivity in MANETs, military troops can maintain global connectivity alongside their local military
communication.
Routing between MANET and Internet was first proposed by Perkins et al. [1] where MANET nodes gain access to the
Internet via special MANET nodes running both Mobile IP and ad hoc routing protocol, acting as gateways between the
MANET and the Internet.
A lot of study has been done on Internet-MANET architecture, gateway discovery mechanisms [2], [3], address configuration
[4], [5] reducing routing overhead for gateway discovery and achieving high PDR [6]. PDR is a very important measure in
MANETs because higher PDR means reduced congestion and disruption during communication between MANET nodes. Even
though some studies have been carried out to achieve high PDR, no studies has so far focused on showing PDR over Internet-
MANET traffic separately from Intra-MANET traffic. The key problem of this is that when packet loss occurs, it is impossible
to tell whether lower PDR was due to loss in Intra-MANET traffic, Internet-MANET traffic or both traffic. Packet loss of
Internet-MANET and Intra-MANET traffic occur at different rates. This is because all Internet-MANET packets travel through
the gateway, thus heavily overloading the gateway with traffic and causing excessive packet loss. Therefore, packets loss of
Internet-MANET is always higher than packet loss of Intra-MANET traffic.
Our objective here is to design a cross-layer based protocol such that high PDR can be obtained over Internet-MANET
traffic. In this work, we separately show the performance of PDR of Intra-MANET traffic and Internet-MANET traffic and
also state what percentage each of these traffic constitute during simulation.
The rest of paper is structured as follows. Section II cites related work in the area of Internet connectivity in MANETs. In
Section III, we describe the analysis and implementation of our cross-layer design. Section IV describes the incorporation of
our cross-layer design into our protocol. Section V shows evaluation of our protocol through simulation. Section VI presents
our concluding remark.
II. RELATED WORK
In the past decade, various architectures have been proposed to connect a MANET to the Internet via a gateway [7], but we
focus mainly on those architectures that employ Mobile IP because it is the next step to be implemented to achieve ubiquitous
communication [8]. In these Mobile IP integrated architectures the main challenge was to determine whether packets need
to be routed to the Internet via a gateway, and if so, how to reach the gateway. Different architectures were developed for
connecting MANETs to the Internet [2], [9], [10], [3], [11]. Jonsson et al. developed MIPMANET, one of the very first detailed
works on MANET Internet integrated architecture using Mobile IP. [9] and [3] also developed similar architectures, however,
they do not have proper IPv6 specifications developed. In [10], a multiple gateway architecture was proposed for MANET
nodes to communicate with the Internet but the architecture suffers from redundant signaling overhead because of multiple
gateways [7]. A considerable amount of work had been done on gateway discovery. Studies on gateway discovery and address
configuration were discussed in [4], [12], [5], [13]. Other works included gateway discovery such that routing overhead can
be reduced and higher packet delivery can be obtained [14], [15], [16], [6].
Most of the above works described connecting a MANET to the Internet using Mobile IP. A major limitation of this
architecture is that mobile nodes have to go through unnecessary gateway registrations [7] even when they are not experiencing
inter-MANET mobility but simply seeking Internet connectivity. Only a few works [12], [5], [13], [6] explicate IPv6 MANETs
where nodes can obtain Internet connectivity without the aid of Mobile IP but still have provisions for incorporating Mobile
IP. We believe these architectures [12], [5], [13], [6] can perform better when quick Internet connectivity is required, because
unnecessary Mobile IP gateway registrations are not needed. However, a determining factor of such quickness is the ad hoc
routing protocol used in the MANET.
Two major classes of routing protocols, reactive and proactive, are typically used in MANETs to determine where and how
packets need to be routed. In reactive protocols, the time taken to determine whether packets need to be routed to the Internet
via a gateway and the route acquisition time to a gateway is very large because routes are not readily available. Delay caused by
such route acquisition time causes PDR to fall in Internet-MANET traffic, thus reactive protocols are not suitable for achieving
high PDR when routing packets to and from the Internet. In Proactive protocols, also known as table-driven protocols, packets
destined within a MANET are immediately routed because all MANET destinations are readily available. Packets destined
outside the MANET are also readily routed towards the gateway [13], also known as default route, and forwarded accordingly.
Thus, proactive protocols are more suitable for quick Internet connectivity.
To ensure high PDR, we based our study on an existing proactive routing protocol based architecture [6]. Hwang et al.
[6] proposed an IPv6 based self-addressing routing protocol where MANET nodes form a tree overlay rooted at the gateway.
Here packets destined for the Internet are routed towards the gateway using hierarchical routing and packets destined within
the MANET are routed using soft state routing [6]. In this paper, we will refer to this protocol as Tree-Based Routing (TBR),
as it forms a tree overlay. Our choice of TBR as basis of study was due to its fast Internet connectivity and high PDR. Even
though TBR doesn’t require Mobile IP to gain Internet connectivity, it still incorporates Mobile IP in its architecture such that
a mobile node may use it when needed. TBR was compared and shown to outperform Destination-Sequenced Distance-Vector
Routing (DSDV) in small-scale low-mobility MANETs. We have extended the protocol in [6] to improve its performance in
terms of PDR and compared our protocol’s performance to TBR via simulation. We also compared our protocol to DSDV, as it
is a commonly used benchmark in recent research [7]. Most real world implementations comprise of low-mobility small-scale
MANETs [17] and we chose similar topology for our experiments. In all the protocols discussed above, to obtain Internet
connectivity, the main challenge is to locate a path from a node to the gateway, and preferably a path with minimum hops to
the gateway as it usually exhibits less routing delay and also may lead to higher PDR over a period of time. We believe that
this is not a sufficient measurement to achieving high PDR while receiving or forwarding packets to and from the gateway
because minimum hops to the gateway doesn’t take into consideration the drop in PDR due to packet loss induced by network
congestion or contention along that path. It is not possible to determine such congestion or contention from the network layer,
as a result, typical ad hoc routing protocols suffers the consequences of packet loss. The core contribution of this work is to
develop a congestion-aware MANET routing protocol that will provide global connectivity and improved Quality of Service
(QoS) for the next-generation applications and devices [8].
In order to determine congestion or contention, cross-layer routing have recently been proposed. In cross-layer routing,
different layers of the Open System Interconnection (OSI) model share information gathered at each layer to improve perfor-
mance in terms of packets delivery, routing delay, routing overhead and various other performance measures. In the past few
years, a number of studies has been done on cross-layer routing in MANETs to achieve high packet delivery ratio. Denko
et al. [18] described a cross-layer routing protocol where specially selected mobility-aware nodes called brokers, publishers
and subscribers route packets based on node mobility determined through link failures detected at the link layer. Song et al.
[19] modified Dynamic Source Routing (DSR) by allowing nodes to determine stable paths from link layer frame collisions
and channel usage determined from Network Allocation Vector (NAV). However, all these cross-layer techniques use reactive
protocol, which as discussed earlier, are not suitable for achieving high PDR over internet-MANET communication.
Karbaschi et al. [20] proposed a cross-layer approach on a proactive protocol to measure the quality of a path between
any two given nodes in a MANET based on the amount of contention arising at each link along that path. It was shown that
higher PDR could be obtained if packets were traveling along a path having no or less contention compared to a contention
prone path. In our opinion, this is an apposite approach and we have adopted, improved and applied this to our extension of
protocol, introduced by Hwang et al. We also believe that, in addition to the contention measure, congestion along any path
also adversely affect the PDR. Through experiments, we have formulated and implemented a congestion measuring algorithm
and applied that to our extension. Since our protocol can measure congestion along given paths in a Tree-Based overlay [6],
we decided to call our protocol Congestion Aware Tree Based Routing (CATBR). In this paper we will show that CATBR can
outperform both DSDV and TBR in terms of PDR in small-scale low-mobility networks.
III. CROSS-LAYER ANALYSIS
MANET routing is inherently a network layer problem. Typical MANET routing protocols focus on minimizing the number
of hops when routing packets to a particular destination. Therefore, when a MANET is connected to the Internet, packets
traveling to the Internet are routed to the gateway via the shortest path to minimize routing delay. However, when multiple
shortest paths are available to a gateway, the choice of shortest path may become detrimental if a congested path is chosen.
Congestion cannot be determined from network layer, and it seriously affects the PDR. In this work, we use a cross-layer
approach to determine congestion that occurs along any path to a gateway.
A. Contention Metric
One of the major factors creating congestion in a node is contention in the wireless link. In a contention prone channel,
packets cannot readily be forwarded. As a result, packet forwarding is delayed or packets are dropped, minimizing the PDR.
To determine this contention we formulated our algorithm based on the theory proposed by Karbaschi et al. [20]. Here, at
each node we measure the contention using Request To Send (RTS) frames, Clear To Send (CTS) frames, data frames and
acknowledgment for data frames at the link layer. In a contention free channel, for forwarding a data frame, a single RTS
frame is sent followed by the receiving of a single CTS frame followed by the transmission of the data frame, and finally
receiving an acknowledgement for that data frame. In a contention prone channel any of these four frames can be garbled due
to collisions and results in either the retransmission of a RTS frame or retransmission of the data frame or both. Therefore,
whenever we observe retransmission of a RTS or data frame, we can conclude that contention is occurring.
To understand how we calculate the contention, let’s assume that an arbitrary node forwards N frames in t seconds to
its one-hop neighboring nodes. Let i denote the ith frame being sent from a node to its neighbors. Let the total number of
Retransmitted RTS (RRTS) from a node sending N frames to any arbitrary node within an interval of time t seconds is named
TRTS , defined as:
TRTS =
N∑
i=1
RRTS(i) (1)
Now, let the total number of Retransmitted Data Frames (RDF ) from a node sending N frames to any arbitrary node within
an interval of time t seconds is named TDF , defined as:
TDF =
N∑
i=1
RDF (i) (2)
The interval of time t has been introduced because a node updates its contention metric periodically to reflect the change
in the level of contention. The ratio of the total number of failed frames to the total number of frames sent, within an interval
of time t seconds, thus reveal a measure of contention in the channel. We name this ratio RatCON and define it as:
RatCON =
TRTS + TDF
2N + TRTS + TDF
(3)
Finally, we calculate the level of contention at a node and call it Contention Metric (CM), which is in normalized form. A
value of CM of one represents absence of contention around that node. Lower values of CM indicates presence of contention.
CM is defined as:
CM = 1 − RatCON (4)
B. Queue Metric
Decrease in PDR due to contention is mostly perceived as directly related to reasonably dense networks where nodes are
continuously competing to use the channel whenever the channel appears to be free. This is not always true and decrease in PDR
between MANETs and Internet, as this work focuses mainly on this flow of PDR, can occur even in sparse networks if some
intermediate node along the path to the gateway send packets at a very high rate, thus exhausting the interface packet queue
and causing packets to drop. Since we use Constant Bit Rate (CBR) for simulation, dropped packets are never retransmitted
and critically affect PDR. Higher number of packets in an interface queue of a node increases the chances of exhausting the
queue. Therefore the number of packets in a queue at any given node is an important measure in determining congestion along
a path, leading to drop in PDR. Using the number of packets in the queue at any given node, we developed a Queue Metric
(QM), that we can use in our cross-layer design.
QM represents the ratio of the queue occupied by packets, and can thus can be used to determine congestion as described
above. Higher the length of the queue, higher the chance of the packets getting dropped. We calculate QM by taking the
average queue length for a period of t seconds and dividing it by the queue size (i.e. the maximum number of packets that
the interface queue can hold at any given instance).
To understand the calculation of the queue metric, let L(t) denote the queue length at time t. Let N be the total number of
queue length readings taken within an interval of time T seconds. The average of these queue length readings is given by:
L̄(t) =
N∑
t=1
L(t)
N
(5)
Let Qsize be the size, in number of packets, of the interface queue. We define QM, which is already normalized, as:
QM =
L̄(t)
Qsize
(6)
C. Self Metric
Every node in the MANET measures its own CM and QM at given intervals to determine the level of contention and queue
impediment it is experiencing. Since both CM and QM are normalized, they can be combined into a single unit with appropriate
weights assigned. We call this combined unit Self Metric (SM) and define it as:
SM = α × CM + (1 − α) × QM (7)
where α = 0.80 and 0 < α < 1
Here, alpha is assigned a higher value of 0.80 because it is likely that the number of nodes experiencing contention will be
higher compared to the number of nodes experiencing queue impediment due to high packet rates. This SM is also normalized.
SM of 1 at any given node means least or no congestion around that node and lower values of SM represents congestion.
GABCD
FMD=SMD X FMC
FMC=SMC X FMB
FMB=SMB X FMA FMG= SMG=1
FMA=SMA X FMG
FMGFMAFMBFMC
Gateway to Internet
Mobile node
Communicate FM
Fig. 1. Final metric measurement.
D. Final Metric
A node’s SM only reveals the contention and queue impediment around and in that node, respectively. But our objective
is to increase the PDR along a path to the gateway. Therefore, we need a measure of the congestion level of the entire path
from a node to the gateway. This is done by introducing another metric which we call Final Metric (FM). Every node in the
MANET calculates its FM by multiplying its own SM with the FM of the node that is the next hop towards the gateway. Fig.
1 shows an example with four mobile nodes and how each node calculates its FM. The FM and SM of the gateway are always
set to 1 because it is common for all nodes. At any given time, a node’s FM is the product of all the SMs from that node to
the gateway. To understand how we measure the FM of a given node, let’s assume that a node is the Kth node from the root
(gateway) of the tree, where the root is the first node denoted by j=0. Here FM of the Kth node is defined as:
FMK =
K∏
j=0
SMj (8)
FM of any node reveals the level of congestion, of the entire path, from that node up to the gateway. Thus, it can be used
in determining the least congested path when multiple paths are available to reach the gateway. The next section explains how
this FM is actually shared between nodes and used in our protocol.
IV. PROTOCOL DESIGN OF CATBR
In this section, we describe how each MANET node utilizes its FM to form a tree overlay [6] rooted at the gateway with
mobile nodes communicating with each other via special control packets. Here routing and addressing is integrated and each
node configures its hierarchical address such that it attains the shortest and the least congested path to the gateway. Every
node forms a parent-child relationship through a join procedure such that every parent node is the default route for every child
node whenever it communicates with the Internet. Communication between MANET nodes is done through soft state routing
discussed later.
Roaming node MANET node
C
o
n
n
ecto
n
estab
lish
m
en
t
C
o
n
n
ectio
n
m
ain
tain
an
ce
an
d
 d
ata
tran
sfer
H
A
 receiv
in
g
 tim
e
m
ax
ed
 o
u
t. C
o
n
n
ectio
n
lo
st. R
eestab
lish
in
g
co
n
n
ectio
n
.
Join request(JRQ) / Join response (JRS) / Join confirm(JCF)
Heartbeat (HB) / Heartbeat Acknowledgement (HA)
Data
JRQ
JRS
DATA
HB
JRQ
JCF
HA
HB
HB
DATA
DATA
DATA
JRQ
JRQ
JRQ
JRS
JRQ
JCF
JRQ
JRQ
DATA
H
A
 n
o
t
receiv
ed
.
R
esen
d
    
H
B
. 
Fig. 2. Signaling diagram of CATBR.
A. Connection Establishment:
In a join procedure, a mobile node within the vicinity of the MANET sends out JOIN REQUEST messages to its neighbors.
All mobile nodes which are already a part of the MANET, upon receiving this message, sends out a JOIN RESPONSE message
back to the originator of the JOIN REQUEST message. The JOIN RESPONSE message contains the originator’s 128 bit IPv6
source address and the FM metric. When a mobile node, seeking connection, receives more than one JOIN RESPONSE
message, it chooses the node with the most appropriate address as its parent. The most appropriate address introduced by
Hwang et al. [6] was based on a minimum number of hops to the gateway, as it yielded a shorter routing path. However, we
have argued that minimum number of hops is not an appropriate path when more than one shortest path is available because
some paths are more congested than others. In this paper, the most appropriate address is chosen by dividing the FM in each
JOIN RESPONSEs by the number of hops to the gateway and accepting the one which results in the highest value. By doing
this, a node can not only be closest to the gateway, but also be able to choose a path with minimum congestion among the
shortest paths to the gateway. The number of hops to the gateway can be determined from the IPv6 address contained in the
JOIN RESPONSE message [6]. A JOIN CONFIRM message is sent to the most appropriate address confirming the parent-child
relationship. Fig. 2, shows the signaling diagram for a join procedure.
B. Address Configuration:
Before joining the MANET, a node’s IPv6 link local address is configured using its 64-bit Extended Unique Identifier (EUI)
[6]. However, after joining the MANET it reconfigures its link local address by replacing the EUI part with its logic address.
The logic address is also 64-bits long and each 4 bits represent a node’s level in the tree. Fig. 3 shows an example of how this
logical address is formed. The global IPv6 address of a node is created by appending the 64-bit subnet prefix of the gateway’s
global IPv6 address with the 64-bit logic address of the node [6]. Whenever a node joins the MANET, it also creates its list
of logic address for its child nodes [6]. For example, a node which configured its logic address to 1.3 will immediately create
its list of 15 child node address starting from 1.3.1 through 1.3.15. Any node willing to join 1.3 as a child will be assigned
an address available from those 15 addresses.
Fig. 3. Tree topology formation.
C. Connection Maintenance:
The MANET nodes maintain the tree overlay by sending special control packets called heartbeat and heartbeat acknowl-
edgement. After a node joins the MANET, it sends heartbeat packets to its parent at intervals and the parent, upon receiving
that, sends a heartbeat acknowledgement back to the child for each heartbeat received. Fig. 2 shows the signaling diagram for
this process. Whenever a child node doesn’t receive a heartbeat acknowledgement within a certain period of time it resends
the heartbeat and reduces the waiting period by half. The process continues until the child node reaches a certain threshold
for the number of heartbeats sent. Once it reaches this threshold, it assumes the parent node has moved away or it itself has
moved away and restarts the join procedure. A parent node on the other hand waits for certain period of time for receiving a
heartbeat and if it doesn’t receive a heartbeat within that period, it assumes the child node has moved away and reallocates
the child address for reuse.
D. Metric Update:
Every node measures its FM at intervals as long as it’s a part of the MANET tree to reflect the change in contention or
queue impediment it is experiencing. However, for a node to measure its own FM, it also needs to obtain the FM of its
parent (i.e. the next hop to the gateway) as shown in Fig. 1. Therefore, every parent node piggybacks its FM on the heartbeat
acknowledgement, sent to its child nodes periodically. Since a node updates its FM periodically, it can always keep an estimate
of congestions level of the path from itself to the gateway.
As we have focused on achieving high PDR between a MANET and the Internet, this FM helps a roaming node to choose
a proper parent (default route), when seeking connection, through a join procedure.
E. Routing:
Longest prefix matching is used in this protocol for routing, resulting in either hierarchical routing or soft state routing [6].
Whenever a MANET node needs to send data packets to the Internet, the longest prefix matching yields in no match and
travels though a node’s default route. Every node’s default route is its parent and such data travels along the hierarchy of the
tree to the gateway. Whenever data packets are received from the Internet it also travels the same hierarchical path because of
the longest prefix matching method. However, hierarchical routing is not always suitable when data is transferred between two
nodes on two branches of the tree and they also happen to be close distance neighbors. Here the packets would travel through
the hierarchy to the root of the subtree and then to the destination node. For example, in Fig. 1, a packet sent from node 1.2.1.2
to 1.2.4.2, that are also one-hop neighbors, would travel through 1.2.1.2, 1.2.1, 1.2, 1.2.4 to 1.2.4.2. This inefficient routing
problem is solved using soft state routing where a node keeps one-hop neighboring node’s information in its routing cache.
This information can be obtained by using Neighbor Discovery Protocol (NDP) for IPv6 networks or by simply listening to
the wireless media. MANET nodes can also employ Mobile IP using procedure described in [6].
V. SIMULATION AND RESULTS
In this section we have compared the control packet overhead and PDR for the three protocols, DSDV, TBR and CATBR
and showed that our protocol, CATBR, performs better in terms of PDR in various scenarios. We used NS2 for simulation
and implemented the two new routing protocols, namely TBR and CATBR. We made appropriate modifications to the MAC
sublayer in NS2 to achieve cross-layer optimization in CATBR by sending the count of data frames, retransmitted data frames,
RTS frames and retransmitted RTS frames from the link layer to the network layer. We also made appropriate modifications
to NS2 in conformance to IPv6 standards. Our simulated network had 10 to 50 nodes with run time of 600 simulated seconds.
Table I shows the values of parameters used in our simulations.
TABLE I
Values of parameters used in our simulations
Mobility Random way point movement
Link layer protocol MAC802.11
Wireless bandwidth 1Mbps
Wireless range 250m
Interface queue length 50 packets
Interface queue type Droptail
Grid size 1400m X 1400m
An average of ten simulations were taken for each data point. On the average, Internet-MANET packets constituted 45% of
the traffic and Intra-MANET packets constituted 55% of the traffic. Packet size was set at 512 bytes and nodes sent CBR packets
with rates ranging from 10 packets/s to 35 packets/s from each source. Node speeds were varied from 0m/s to 10m/s. Even
though all simulations had both Internet-MANET traffic and Intra-MANET traffic flowing simultaneously, the data obtained
for each type of traffic were shown separately to demonstrate their individual performance, as discussed before.
10 15 20 25 30 35 40 45 50
0
500
1000
1500
2000
2500
3000
C
on
tr
ol
 P
ac
ke
t O
ve
rh
ea
d 
in
 K
B
Number of Nodes
 
 
DSDV
TBR
CATBR
Fig. 4. Control packet overhead vs. number of nodes.
A. Control Packet Overhead vs. Number of Nodes
Control packet overhead is popularly defined as the number of control packets transmitted by a MANET protocol. It
demonstrates the bandwidth occupancy by a protocol to maintain MANET topology. However, different MANET protocols
generate different size of control packets, as a result, the comparison of routing protocols based on the number of control
packets transmitted is sometimes flawed. Higher bandwidth occupancy by control packets usually results in low PDR. In this
work, we have measured the control packet overhead in KiloBytes (KB) because it is a more accurate measure when control
packet size varies. Fig. 4 shows the control packet overhead against the number of nodes for each protocol. We can clearly
see that control packet overhead in DSDV increase rapidly with the increase in number of nodes. This happens because in
DSDV each node must store routes to all other nodes in the MANET and share this routing information at intervals with
its one-hop neighbors. Control packet overhead of CATBR and TBR is less because only small sized heartbeat and heartbeat
acknowledgement messages are used to maintain MANET tree overlay. Control packet overhead of CATBR is slightly less
than TBR as we made modifications to our CATBR’s packet header without compromising IPv6 standards.
10 15 20 25 30 35 40 45 50
0.8
0.82
0.84
0.86
0.88
0.9
0.92
0.94
0.96
0.98
1
PD
R
 (
In
te
rn
et
−
M
A
N
E
T
)
Number of Nodes
 
 
DSDV
TBR
CATBR
Fig. 5. Packet delivery ratio (Internet-MANET) vs. number of nodes.
10 15 20 25 30 35 40 45 50
0.94
0.95
0.96
0.97
0.98
0.99
1
PD
R
 (
In
tr
a−
M
A
N
E
T
)
Number of Nodes
 
 
DSDV
TBR
CATBR
Fig. 6. Packet delivery ratio (Intra-MANET) vs. number of nodes.
B. Packet Delivery Ratio vs. Number of Nodes
In Fig. 5, we can clearly see the effect of our CATBR’s cross-layer routing in the aspect of PDR of Internet-MANET traffic.
Here in CATBR, packets were always routed via the least congested path when traveling to and from the gateway and as a
result, even with increase in congestion and contention due to increase in number of nodes, the PDR doesn’t considerably
drop. TBR, however, suffers from the increase in number of nodes because of increased contention and congestion, and being
unable to determine it. PDR in DSDV, even in a small MANET, is not very high as considerable amount of the bandwidth
is occupied with control packets, especially around the gateway. The performance remains the same even with the increase in
number of nodes.
0 100 200 300 400 500 600
0.8
0.82
0.84
0.86
0.88
0.9
0.92
0.94
0.96
0.98
1
PD
R
 (
In
te
rn
et
−
M
A
N
E
T
)
Pause Time (sec)
 
 
DSDV
TBR
CATBR
Fig. 7. Packet delivery ratio (Internet-MANET) vs. pause time.
0 100 200 300 400 500 600
0.6
0.65
0.7
0.75
0.8
0.85
PD
R
 (
In
tr
a−
M
A
N
E
T
)
Pause Time (sec)
 
 
DSDV
TBR
CATBR
Fig. 8. Packet delivery ratio (Intra-MANET) vs. pause time.
In Fig. 6, we see that the performance of the three protocols are comparable when routing packets within the MANET.
This is because, in all three protocols, packets traveling within the MANET are routed without consideration of congestion or
contention, therefore the protocols route packets using the shortest path. The slight drop in PDR for all three protocols occurs
due to contention arising from higher number of nodes.
C. Packet Delivery Ratio vs. Pause Time
In Figs. 7 and 8, we can see that at lower pause time, DSDV performs better than both TBR and CATBR. This is because,
both TBR and CATBR are tree based network, and a connection lost between a parent and child near the root of the tree results
in rebuilding of all the connections in that branch under that node. In higher pause times, as mobility is low, such breakage
in branches do not occur frequently and higher PDR is obtained. In Fig. 8, the PDR of Intra-MANET traffic, for each pause
time, is slightly lower compared to PDR of Internet-MANET traffic in Fig. 7. This is because connection between any two
points in a MANET is not simultaneously repaired, as a result connection broken between any two MANET nodes is more
frequent when compared to connection lost between a MANET node and gateway, for all three protocols.
D. Packet Delivery Ratio vs. Speed of Nodes
In Figs. 9 and 10, we can see that at low mobility CATBR performs better than DSDV because at low mobility tree formation
is stable and bandwidth consumption by control packets is less than DSDV. CATBR also performs slightly better than TBR
because of lower control overhead and faster tree repair. Faster tree repair was achieved by, unlike TBR, reducing the time
between heartbeat intervals when a heartbeat acknowledgement is not received. In Fig. 9, performance of both CATBR and
TBR falls at higher speeds as breakage in tree paths towards gateway usually requires longer time to repair compared to paths
broken in DSDV. In Fig .10, at higher speeds, the PDR drops significantly in all three protocols because routes are continuously
broken and repaired at multiple points in the MANET.
0 1 2 3 4 5 6 7 8 9 10
0.78
0.8
0.82
0.84
0.86
0.88
0.9
0.92
0.94
0.96
0.98
PD
R
 (
In
te
rn
et
−
M
A
N
E
T
)
Speed of Nodes (m/s)
 
 
DSDV
TBR
CATBR
Fig. 9. Packet delivery ratio (Internet-MANET) vs. speed of nodes.
0 1 2 3 4 5 6 7 8 9 10
0.55
0.6
0.65
0.7
0.75
0.8
0.85
P
D
R
 (
In
tr
a−
M
A
N
E
T
)
Speed of Nodes (m/s)
 
 
DSDV
TBR
CATBR
Fig. 10. Packet delivery ratio (Intra-MANET) vs. speed of nodes.
VI. CONCLUSION
In this paper, we have shown that cross-layer routing performs better in small-scale and low-mobility tree based MANET
overlay. In military zones, where obtaining Internet connectivity over a large area is a challenge and data loss can be crucial
in hampering day-to-day operations, CATBR can provide global connectivity and ensure high packet delivery ratio for both
Internet-MANET and Intra-MANET traffic. Results show that CATBR performs better than both TBR and DSDV in various
situations including low mobility and varied number of nodes. We have also shown results for PDR of Internet-MANET and
Intra-MANET routing separately to better understand how each flow of data is affected in different situations.
REFERENCES
[1] C. E. Perkins, “Mobile-ip, ad-hoc networking, and nomadicity,” in Proceedings of 20th International Computer Software and Applications Conference
(COMPSAC 1996), Seoul, South Korea, Aug. 21-23 1996, pp. 472–476.
[2] U. Jonsson, F. Alriksson, T. Larsson, P. Johansson, and J. Maguire, “MIPMANET - Mobile IP for mobile ad hoc networks,” in Proceedings of 1st
Annual Workshop on Mobile Ad Hoc Networking Computing, Boston, MA, USA, Aug. 11 2000, pp. 75–85.
[3] M. Ergen and A. Puri, “MEWLANA-Mobile IP enriched wireless local area network architecture,” in Proceedings of the 56th Vehicular Technology
Conference, vol. 4, Vancouver, BC, Canada, Sep. 24-28 2002, pp. 2449–2253.
[4] Y. Sun, E. M. Belding-Royer, and C. Perkins, “Internet connectivity for ad hoc mobile networks,” International Journal of Wireless Information Networks,
vol. 9, no. 2, pp. 75–88, Apr. 2002.
[5] A. Nilsson, C. Perkins, A. Tuominen, R. Wakikawa, and J. Malinen, “AODV and IPv6 internet access for ad hoc networks,” SIGMOBILE Mobile
Computing and Communications Review, vol. 6, no. 3, pp. 102–103, Jul. 2002.
[6] R. Hwang, C. Li, C. Wang, and Y. Chen, “Mobile IPv6-based ad hoc networks: Its development and application,” IEEE Journal on Selected Areas in
Communications, vol. 23, no. 11, pp. 2161–2171, Nov. 2005.
[7] S. Ding, “A survey on integrating MANETs with the internet: Challenges and designs,” Computer Communications, vol. 31, no. 14, pp. 3537–3551,
Sep. 2008.
[8] I. F. Akyildiz, J. Xie, and S. Mohanty, “A survey of mobility management in next-generation all-IP-based wireless systems,” Wireless Communications,
vol. 11, no. 4, pp. 16–28, Aug. 2004.
[9] Y.-C. Tseng, C.-C. Shen, and W.-T. Chen, “Integrating Mobile IP with ad hoc networks,” Computer, vol. 36, no. 5, pp. 48–55, May 2003 2003.
[10] H. Ammari and H. El-Rewini, “Integration of mobile ad hoc networks and the Internet using mobile gateways,” in Proceedings of 18 th International
Parallel and Distributed Processing Symposium, IPDPS 2004, Santa Fe, NM, United states, Apr. 26-30 2004, pp. 3007–3014.
[11] P. Ratanchandani and R. Kravets, “A hybrid approach to internet connectivity for mobile ad hoc networks,” in Wireless Communications and Networking
Conference, vol. 3, New Orleans, LA, USA, Mar. 16-20 2003, pp. 1522–1527.
[12] J. Xi and C. Bettstetter, “Wireless multihop internet access: Gateway discovery, routing, and addressing,” in International Conference on Third Generation
Wireless and Beyond, San Francisco, CA, USA, May. 28-31 2002, pp. 109–114.
[13] R. Wakikawa, J. Malinen, C. Perkins, A. Nilsson, and A. Tuominen, “Global connectivity for IPv6 mobile ad hoc networks,” Mobile Ad Hoc Networking
Working Group, Mar. 2006.
[14] J. Lee, D. Kim, Y. Choi, J. Choi, and S. Nam, “Hybrid gateway advertisement scheme for connecting mobile ad hoc networks to the internet,” in
Proceedings of the 57th Vehicular Technology Conference, vol. 1, Jeju, South Korea, Apr. 22-25 2003, pp. 191–195.
[15] P. Ruiz and A. Gomez-Skarmeta, “Adaptive gateway discovery mechanisms to enhance internet connectivity for mobile ad hoc networks,” Ad Hoc and
Sensor Wireless Networks, vol. 1, no. 1, pp. 159–177, Mar. 2005.
[16] V. D. Hoang, Z. Shao, M. Fujise, and H. M. Nguyen, “A novel solution for global connectivity in MANET,” in Proceedings of 60th Vehicular Technology
Conference, vol. 4, Los Angeles, CA, USA, Sep. 26-29 2004, pp. 2819–2823.
[17] W. Kiess and M. Mauve, “A survey on real-world implementations of mobile ad-hoc networks,” Ad Hoc Networks, vol. 5, no. 3, pp. 324–339, Apr.
2007.
[18] M. K. Denko, E. Shakshuki, and H. Malik, “A mobility-aware and cross-layer based middleware for mobile ad hoc networks,” in Proceedings of the
21st International Conference on Advanced Networking and Applications, Niagara Falls, ON, Canada, May 21-23 2007, pp. 474–481.
[19] W. Song and X. Fang, “Routing with congestion control and load balancing in wireless mesh networks,” in 6th International Conference on ITS
Telecommunications, Chengdu, China, Jun. 21-23 2006, pp. 719–724.
[20] G. Karbaschi and A. Fladenmuller, “A link-quality and congestion-aware cross layer metric for multi-hop wireless routing,” in IEEE International
Conference on Mobile Ad Hoc and Sensor Systems (MASS 2005), Washington, United States, Nov. 7-10 2005, pp. 649–655.

