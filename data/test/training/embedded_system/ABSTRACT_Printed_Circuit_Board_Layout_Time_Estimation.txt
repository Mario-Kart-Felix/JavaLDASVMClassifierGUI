Printed Circuit Board Layout Time EstimationCyrus Bazeghi and Jose RenauUniversity of California, Santa CruzABSTRACTSystem design complexity is growing rapidly. As a result, current development costs can be staggering and are constantlyincreasing. As designers produce ever larger and more complex systems, it is becoming increasingly difficult to estimatehow much time it will take to design and verify these designs.To compound this problem, system design cost estimation stilldoes not have a quantitative approach. Although designing asystem is very resource consuming, there is little work invested in measuring, understanding, and estimating the effortrequired.To address part of the current shortcomings, this paper introduces PCBComplexity, a methodology to measure andestimate PCB printed circuit board design effort. PCBsare the central component of any system and can requirelarge amounts of resources to properly design and verify.PCBComplexity consists of two main parts, a procedure toaccount for the contributions of the different elements in thedesign, which is coupled with a nonlinear statistical regression of experimental measures. We use PCBComplexity toevaluate a series of design effort estimators on several PCBdesigns. By using the proposed PCBComplexity metric, designers can estimate PCB design effort.1 IntroductionPrinted circuit board PCB design effort keeps growing as additional constraints such as rising clock frequencies, reducedarea, increasing number of layers, mixed signal devices, andthe ever increase in component numbers and densities. All ofthese factors combined have led to a steady rate of increasein development costs for current systems. As we design everlarger, denser and more complex systems, it is becoming increasingly difficult to estimate how much time would be required to design and verify them. To compound this problem,PCB design effort estimation still does not have a quantitativeapproach. We present in this paper a first step toward creating a design effort metric that is highly correlated with designeffort for PCB layout. We follow the same approach takenin 1 as the principles that are applicable to microprocessorsare also applicable to PCBs. In this paper, design effort corresponds to the number of engineeringhours required for implementation layout of a PCB design.This work was supported in part by the National Science Foundation undergrants 0546819 Special Research Grant from the University of California,Santa Cruz and gifts from SUN.This paper analyzes and proposes various statistics to estimate the layout effort required to develop PCBs. We investigate and quantify statistics such as area, component count, pincount and device types and sizes for many PCBs. We analyzeseveral of these statistics, and propose a metric, obtained after applying nonlinear regression over the different statistics,which we call PCBComplexity. In addition, we provide insights on the correlation between several statistics and designeffort for several known layout design times.Different designs have different constraints, leading to specific challenges typical design constraints being area, frequency, and cost. For example, having area being a primarydesign constraint, may lead to a requirement for additionallayers, more expensive package types, and more complexplacement and routing. A design constrained by cost, on theother hand, may require a balance between number of layers,area, drill density, types of packages and possibly the numberof different drill sizes. Having clear constraints is necessary inestimating layout effort as it can drastically affect complexity.We define design effort to be the layout time required byone engineer. Design effort is equivalent to layout time whenthe project has a single developer, which is frequent even forcomplex PCBs. Nevertheless, for a given effort requirement,it is possible to reduce the design time by increasing the number of workers. Nevertheless, increasing the number of workers decreases the productivity per worker. The relationshipbetween these two elements has been widely studied in software metrics and business models. Since the conversion between design effort and design time can be approximated, theremainder of this paper focuses only on design effort.The rest of the paper is organized as follows. Section 2covers other work in this area Section 3 describes the statistical techniques that allow us to calibrate and evaluate thePCBComplexity regression model Section 4 describes thesetup for our evaluation Section 5 evaluates several statisticsfor the boards in our analysis and Section 6 presents conclusions and future work.2 Related WorkThe capability to rapidly develop complex PCBs is a tremendous competitive advantage, since high development productivity is essential for the success of any design team. Although some companies have used statistical methods to estimate PCB design time, those methods are considered tradesecrets 9. Other companies do not release details because1they provide competitive advantage over other companies. Asa result, we are unaware of any published work on the topic ofpredicting the engineering hours required for a PCB design.1 focuses on microprocessor design effort. While thework described in this paper focuses on PCB design metrics, 1 uses the same regression model, but both papers analyze different set of statistics and targets.Another paper that looks at productivity is 7 which identifies the need for standards or infrastructures for measuring and recording the semiconductor design process. Theypropose improving design technology, timetomarket, andqualityofresult by addressing the Design Productivity Gapand the Design Technology Productivity Gap. However,this previous work focused mostly on the problems associatedwith the infrastructure and design tools related to the physicalimplementation of semiconductor designs, while the focus ofthis paper is layout effort associated with PCB designs.In 8 a factor similar to the productivity factor is described.They use the process productivity parameter to tune the estimating process for software projects. They contend that ifyou know the size, time, and the process productivity parameter you can use it to make estimates for a new project. Solong as the environment, tools, methods, practices, and skillsof the people have not changed dramatically from one projectto the next.Much research has been done in Design for Manufacturing DFM and Design for Production DFP which seek toimprove the production and manufacturing times of PCB assemblies. This paper seeks to develop a metric that can aidin predicting the layout effort, based on analysis of characteristics of PCBs at a lowlevel so as to better plan for futuregenerations of systems. In 2 the issue of embedded passivecomponents is discussed as a necessity to the smaller electronic devices requiring ever smaller PCBs. They note thatboard area is becoming so critical that to keep pace with thesize constraints new techniques are required. Our goal wouldbe to eventually develop a set of metrics and a model that estimates design effort by also taking into account manufacturingtimes.3 ApproachOur goal is to develop a quantitative approach and to havea model that quickly estimates design effort based on several easily gathered statistics. This is important because beingable to predict design effort is advantageous in helping to reduce design costs. To build the model, we analyze many commercial computerelectronic devices and gather data from thePCBs within. The layout times for these PCBs were well documented which was a requirement for this analysis. Table 1lists the critical components of PCB designs as determinedby 2. These parameters contribute to the complexity of adesign, and hence the time required to do layout.Some design parameters listed in Table 1 are dependent onother factors. For example, the size of the board is defined bythe number of embedded and discrete passive components and1. Board dimensions length and breadth2. Total wiring requirements3. Number of layers4. Number of embedded resistors if used5. Number of embedded capacitors if used6. Set of active component types and their number7. Thickness of the board8. Number of discrete resistors9. Number of discrete capacitorsTable 1 Critical design parameters for a PCB.total wiring requirements. However, the total wiring requirements are governed by the number of embedded and discretepassive components in the PCB. And further more, the totalnumber of layers in the PCB depends on the size of the board,the number of embedded and discrete resistors and bypass capacitors 2.These critical design parameters are focused towards manufacturability, not design effort estimation. We used them asa starting point in determining what parameters or metrics toanalyze and include for correlation with design effort. Noneof the boards in our study have embedded passive components, instead we focus on the total number of all componentspassive and discrete and the pin count for them. These areeasily obtainable values.Since the routing data is not easily obtainable, the numberof pins for all the components in the design are taken into account instead. While this is not an ideal metric since not allpins are used or have very short traces VDD or GND, it isreadily obtainable an does not hamper the focus of this paper, namely effort prediction starting from higher level designdescriptions, such as a bill of materials BOM or schematics.In order to find a metric highly correlated with design effort, several statistics were gathered from the existing designs.For each isolated board with a known design effort, we lookat several statistics and apply nonlinear regression to find ahighly correlated metric.We present our design effort model as the aggregate of a setof statistics Si. Each of which has a specific constant wi,associated with it, which assigns a weight to the importanceof every statistic used as input in the model. The aggregateof the statistics is inversely proportional to the productivityof a specific design team which is represented by a constant. The model is presented in Equation 1. In order to findsuitable values for each of the data weights wi we performmixed nonlinear regressions on this equation. The designteam productivity factor  is constant per design group, andit needs to be adjusted on a per company or design team basis.If the  is unknown, then the absolute design effort is invalidand only the breakdown inside the project is correct. Obtaining the value of  is simple all that is needed is to have thedesign effort for a single project. Alternatively, it is possibleto develop a productivity benchmark suite that calibrates  fora given company.2Design Effort 1nk1wk  Sk 1In order to determine the weights that give a generalized solution to Equation 1, 1 proposes to use a mixed nonlinearregression model. If there are no productivity adjustments,it is possible to use a simpler nonlinear regression model.While the sum of a large number of random variables is distributed normally, the product of a number of random variables is distributed lognormally  a distribution where thelogarithm of the variable is normally distributed 4. Therefore, since the random variables have a log normal distributionan even simpler linear regression model can not be used.To evaluate the accuracy of the model Section 5, we use as a measure of error associated with the fit. Consequently,it is important to understand what different values of  tell usabout the quality of the estimate. For a given , we can finda confidence interval for the estimated effort. The x confidence interval for a metric is defined to be the range of effortsEstimatelow, Estimatehigh such that P Estimatelow metric prediction  Estimatehigh  x100. For example,the 90 confidence interval gives us two values a and b suchthat there is a 90 chance that the actual effort is betweenmetric prediction a and metric prediction b.3.1 Productivity AdjustmentsIn software development projects, it is well known that different development teams have different productivities. Forexample, it has been shown that the productivity differencebetween teams can be up to an order of magnitude 5. We believe that a similar effect occurs between PCB design teams.The productivity differences may be due to multiple factors,including the average experience of the designers in the teamand the tools used. In our model,  captures this effect.The boards under study in this analysis all come from onemanufacturer and so the use of a productivity factor was notnecessary.3.2 Team Size DynamicsAlthough some board designs require long periods of time, itis very rare to find multiple developers doing different sections of the same board. The PCB layout effort by nature isa linear task done by one engineer at a time. To reduce thedesign time, we have found two approaches multitimezoneworking environments, and surgical teams.A multitimezone team has different designers working onmultiple time zones, this is, once a designer stops workinga new designer can continue and pick up where the previousdesigner left. A surgical team 6 follows an alternative design organization, with the surgeon, or chief designer, at thehelm and a supporting staff that has their tasks allocated bythe chief of staff. In the PCB case, we may have other designers doing such tasks as making footprint images for components, which can be a tedious effort.3.3 RLanguageThis section provides the Rlanguage 10 code to fit thenonlinear mixedeffects model and the nonlinear regressionmodel. The mixedeffects model is needed when productivityadjustments  are required, a simpler model is used whenno productivity adjustments are required.Recall that our model has a multiplicative lognormal error and also a lognormal distribution for the random effect. Simply taking the logarithm of both sides of the equationgives us the requisite additive normal error and normal random effect as follows. Hence the need for a nonlinear model. mixedeffects nonlinear modelnlmemodellogEffort logrho  logw1stat1  w2stat2,random  logrho  1  team,fixed  listw1  1, w2  1,start  c0.1, 0.1,datatraw,methodML nonlinear modelnlslogEffort logw1stat1  w2stat2,startlistw10.1,w20.1,datatrawThe Rlanguage is also used to compute the confidenceintervals. To obtain a 90 confidence interval for a given s generated, the following Rlanguage code cexps qnorm0.05, exps  qnorm0.95 is used.4 Evaluation SetupWe gathered data from a number of PCB designs for the analysis done in this paper. Table 3 shows the types of statisticsgathered for each of the boards analyzed. When calculatingthe area consumed for each component we did not considerthe cases where routing, or in the more rare case placement,could be done underneath a component. Several board designers pointed out that the component and pin density of theboard was one of the crucial factors to estimating design effort. To capture component and pin density, we define themwith equation 2 and equation 3 respectively.Component Density  ComponentsPCB Area  Sides w components 2Pin Density  PinsPCB Area3Table 2 gives a description of the boards along with theengineering notes that we were able to gather from the designers. Boards B7B11 used SPECCTRA for OrCAD whichis a common autorouter used in industry. No data was available on the use of an autorouter for boards B1B6 but it canbe safely assumed that some autoroute tool was used.In discussions with the designer of boards B8 and B9 thesize of the LCD in the system dictated the size of the PCBand the housing that contained it. The LCD was counted as a3Board Description Engineering NotesB1 Signal Conditioning Many thruhole components. Analog board with many important signal pathsB2 AE RMS Many thruhole components. Analog board with many important signal pathsB3 PMD Motor Controller Many high density componentsB4 Motor Driver New footprintsB5 Enviro Controller Forgot reasons why it took so longB6 Current Source Many components on a small board. Mechanical constraintsB7 Arbitrary Waveform GeneratorAmplifier Placement constraints due to noise reductionB8 ACDC Monitor Cost major factor. Time consuming to keep to a 2 layer boardB9 Tank Monitor Cost major factor. Time consuming to keep to a 2 layer boardB10 Air spring remote Very small. RF constraintsB11 Air Spring Controller 2 Isolated grounds with placement constraintsTable 2 Description of boards analyzed.Board Statistic DescriptionPCB Size mm2 Physical size of the PCB of Sides w Comp Either 1 or 2 sides has components of Routing Layers Layers used for routing traces of Layers The total number of layers in the PCBComponents Passive Passive components resistors. . .  Digital Digital integrated circuits IC Analog Analog ICs or devices opamps. . .  Mixed Signal ICs with both digital and analog sectionsTotal  Total count of all components on PCBTotal Area mm2 Total area of all components on PCBDensity Ratio of component area to areaPins Passive Pins for all passive components Digital Pins for all digital components Analog Pins for all analog components Mixed Signal Pins for all mixed signal componentsTotal Pins for all devices on PCBDensity Ratio of number of pins to areaTable 3 Description of the statistics gathered from the PCBs.component in our analysis and took one complete side of boththese boards, forcing the placement and routing of all othercomponents to one side. Cost was the main consideration forboth these boards also and this forced the designer to routeeverything using only 2 layers.Among boards B7 through B11 the smallest board, B10,was judged to be the most difficult to layout. Where as boardsB7 and B11 were the easiest. This was attributed to the areas available to do the placement and routing. B7 and B11were two of the largest boards reviewed and they were notarea constrained, this gives much latitude to the designer forplacement and makes the autorouter produce better results.With a more constrained area more human intervention is required during the routing phase which was the case for B10.For the placement stage we only had to consider the numberof sides of the board on which components were mounted.Most of the boards in this study had the components all on oneside, though a few had bypass capacitors mounted on one side,which accounted for a negligible amount of space. Again,thruhole devices would effect the available placement area asit did the available routing area as space would be lost on bothsides of the board, unlike with surface mounted components.This was not a factor in this study since most boards only usedone side for placement. Boards B8 and B9 had components onboth sides but one side was populated by only one component,the LCD. Board B10, the only other board with componentson both sides, did not have any thruhole devices present.5 EvaluationOur evaluation analyzes 11 different printed circuit boards.Table 4 shows the main results and characteristics for each ofthese. The first column corresponds to each of the statistics ormetrics presented in Table 3 Section 4. Columns B1 to B11correspond to each of the boards Table 2. The last columncorresponds to the  between the row and design effort. Sinceall the boards are designed by the same team, we do not evaluate the productivity factor . This simplifies the analysis,and we can use nonlinear regression instead of the mixedeffects nonlinear regression model. With  we can computethe confidence interval. For the lognormal distribution used,the mapping between  and the 90 confidence interval isshown in Figure 1. We will use this chart to compare the accuracy of different estimators. 0.8 0.5 1 1.5 2 2.5 3 3.5 4 0.1  0.2  0.3  0.4  0.5  0.6  0.7 0Multiplicative FactorPCBComplexityPinsComponents90 ConfFigure 1 Mapping between the standard deviation of theerror  and the 90 confidence interval for the lognormalerror distribution used.The design effort values were obtained by interviewing theoriginal designers. Obviously, there is perfect correlation withitself so   0. A zero  results in a perfect 1, 1 confidenceinterval. We now proceed to analyze easily available statisticslike number of components and pin count. These two setsof statistics are easily available before the PCB design starts.They are part of the PCB specification.From the boards analyzed, we observe that it is best to4B1 B2 B3 B4 B5 B6 B7 B8 B9 B10 B11 Design Effort hours 68 35 43 21 48 48 24 40 32 24 12 0Components Passive 213 165 101 80 108 222 116 86 83 19 47 0.52 Digital 15 0 17 0 8 2 0 11 8 4 4 0.99 Analog 24 24 1 10 24 50 28 4 16 1 11 1.10 Mixed Signal 11 0 7 0 0 3 0 0 0 0 0 0.75Total  263 189 126 90 140 277 144 101 107 24 62 0.51Total Area mm2 6214 9053 6964 2719 9144 6579 8104 12193 12296 777 5430 0.93PinsPassive 563 429 365 182 414 578 414 194 188 39 109 0.62Digital 154 0 518 0 107 32 0 175 173 88 32 2.18Analog 188 208 8 98 72 400 150 25 53 14 65 1.19Mixed Signal 172 0 208 0 0 48 0 0 0 0 0 2.00Total 1077 637 1099 280 593 1058 564 394 414 141 206 0.43PCB Size mm2 22194 22194 22194 16258 38710 20452 22194 10968 10968 1277 25548 0.52 of Sides w Comp 1 1 1 1 1 1 1 2 2 2 1 3.17 of Routing Layers 2 2 3 2 2 2 3 2 2 4 2 1.18 of Layers 4 4 6 4 4 4 4 2 2 4 2 0.94Component Density x1000 62 45 30 29 19 71 34 24 26 49 13 0.48Pin Density 50 30 51 18 16 54 26 37 39 115 8 0.64PCBComplexity hours 60 44 44 16 37 57 32 35 33 24 13 0.2Table 4 Statistics, design effort, and correlation results of study boards.use the total number of components to estimate design effort   0.51. Although traces for analog components anddigital components are more difficult than traces for passivecomponents, the low amount of digital andor analog components on several of the boards make it difficult to use themas a method to estimate effort. Figure 1 shows the confidenceinterval for a   0.51 as the intersection between the components line and the confidence interval line 0.43, 2.31. Thismeans that using the number of components on the specification, we have a 90 confidence that the design effort wouldbe between 0.43 and 2.31 times the prediction.Statistics about the pins are as easily available as components even before the design starts. The number of pins is aneven better predictor   0.43 than the number of components   0.51. The resulting 90 confidence interval forthe number of pins is 0.49, 2.03. This means that just by using the pins, we have a 90 confidence that the prediction isroughly half or double the expected design effort. Not shownin the table is the result of combining the number of pins andthe components to predict design effort. The results did notimprove because there is a high correlation between pins andcomponents.Area is an interesting statistic. Just by knowing the finaldimension of the board, we can estimate design effort witha 0.43, 2.35 confidence interval. This is roughly the sameaccuracy as the number of components. The reason is thatPCBs are always area constrained 1. If the specification provides a realistic area constraint, it could be a good way to estimate design effort. Table 4 also shows other statistics suchas number of sides used, routing layers, and number of layers.Those statistics are not so useful by themselves because theyare highly quantized, and this makes them difficult to use topredict effort.The proposed PCBComplexity metrics are now evaluated.1Bigger PCBs have higher cost.To obtain PCBComplexity shown in Table 4, we analyzedmultiple combinations of parameters and followed suggestions from experienced board designers. The best results wereachieved when using the following equationEffort   Passive Comp.  Comp. Density  Pin Density4Section 4 explains how to compute component density andpin density. To obtain the factors on equation 4, we performnonlinear regression as explained in Section 3. Althoughneither pin nor component density can achieve better predictions than the number of pins, when integrated together inthe PCBComplexity metric we achieve a 0.2 . As Figure 1shows, this represents a 0.72, 1.39 confidence interval. Thisroughly means that by using the proposed PCBComplexitymetrics, with a 90 confidence designers can predict designeffort with less than 40 error.Figure 2 shows a scattergather plot between design effortand our PCBComplexity metric. This is an intuitive way tosee that there is a high correlation between design effort andthe metric proposed.PCBComplexity works well because PCB design complexity increases as the component and pin density increases.Designers can increase the number of layers on the PCB todecrease the pin density or increase the area to reduce bothdensities. The problem is that both approaches require morecostly boards. As a result, designers tradeoff between timeto market and density.6 Conclusions  Future WorkThe goal of this paper was to explore the correlation of someeasily obtained metrics of a PCB and see which were mostcorrelated to the design effort required during the layout stageof development. Many simplifications were made we did not5 0 10 20 30 40 50 60 70010203040506070uPCBComplexityDesign EffortFigure 2 Scattergather plot of design effort vs. PCBmetricaccount for traces of differing sizes, we did not look at holesizes or density, the frequency of the boards were not considered, nor the extra considerations required for analog noisefiltering. Also, we need additional PCBs from more companies with teams of differing sizes to develop a more generalmodel for predicting design effort.Many factors and constraints effect the design effort required for a board to be successfully placed and routed. Somedifficulty metric would be helpful but guidelines need to beestablished as difficulty is a very subjective term. Being ableto analysis different options for a board would be useful, suchas being able to change the size of the board to see what effect it would have on the estimated design effort. This couldbe expanded to also include the number of layers since thiswould ease routing congestion.We see this initial research leading into more areas of studyin PCB design optimization and analysis. We are currentlyanalyzing data from additional PCB designs from differentsources. These new designs have more components, morelayers, higher frequencies, and more power plains. This willgive us additional metrics to add to our model for possiblebetter correlation to design effort. These designs also havemore designers on the team which will necessitate some teamor company productivity factor.We have extended the previously proposed Complexitymodels 1 to the PCB domain. We plan to apply the modelto a number of classes at UCSC that do board development togive design guidelines to students and further refine our approach. Our model and metrics will eventually be available toresearchers and industry for use in scheduling and planningPCB projects.The evaluation shows that a simple statistics like PCBarea size and number of components yield some correlationwith design effort. With a 90 confidence, area has a 0.432.35 confidence interval. This means that roughly by looking at any of those statistics the typical design time error ishalfdouble with a 90 confidence. Much better results canbe achieved with the proposed PCBComplexity metric. Inthat case the confidence interval for a 90 confidence is 0.721.39. This roughly means that less than 40 estimation erroris done with a 90 confidence.Despite the good results, we still believe that much workneeds to be done in gathering relevant designs to evaluatewith associated known design times and to refine the metrics and models. A major goal would be a rule of thumb typeequation that given some easily obtainable design parametersan accurate estimator of design time would be generated.AcknowledgmentsWe thank Martin Greatorex and Adam Harrison from VenaEngineering Corporation for providing design effort numbersand the detailed board data used in this study. Thanks also goto Truong Nguyen from SonicWALL, Inc for his insights onthis project and for design data that we plan on using for a future paper in the works. Additional thanks go Brian Greskampand Josep Torrellas of the university of Illinois at UrbanaChampaign for their help on the methods developed.REFERENCES1 C. Bazeghi, F. MesaMartinez, and J. Renau. ComplexityEstimating Processor Design Effort. In International Symposium on Microarchitecture, Nov 2005.2 M. Chincholkar and J. Herrmann. Modeling the impact ofembedding passives on manufacturing system performance.September 2002.3 J. Cohen. Statistical Power Analysis for the Behavioral Sciences. Lawrence Erlbaum, 1988.4 E.L. Crow and K. Shimizu. Lognormal Distributions Theoryand Application. Dekker, 1988.5 T. DeMarco and T. Lister. Peopleware Productive Projects andTeams. Dorset House Publishing, 1999.6 JR. Frederick P. Brooks. The Mythical ManMonth. AddisonWesley, 1995.7 A. B. Kahng. Design technology productivity in the dsm erainvited talk. In Conference on Asia South Pacific Design Automation, pages 443448. ACM Press, 2001.8 L. H. Putnam and W. Myers. Five Core Metrics The Intelligence Behind Successful Software Management. Dorset HousePublishing, May 2003.9 Numetrics Management Systems. Design Complexity and Productivity. Technical report, Numetrics Management Systems,Inc., 2004. httpwww.numetrics.com.10 The R Development Core Team. The R Reference Manual Base Package. Network Theory Limited, 2005.6
