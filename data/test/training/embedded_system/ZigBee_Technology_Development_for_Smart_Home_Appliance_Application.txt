ZigBee Technology Development for Smart Home Appliance Application   YuPing Tsou.  ChunYu Chen.  ChengTing Lin. Email eileentsouitri.org.tw  Energy  Resources Laboratories Industrial Technology Research Institute Hsinchu, Taiwan, R.O.C   Abstract The U.S takes a major role in the area of Smart Appliance Home Control Network technology for decades. The most popular solutions for this technology at this time include wired and wireless. Today, the benefit of remove control system in the house has been enjoyed. As the fast growth of wireless technology, a convergence of sensor devices and home appliances, wireless system is now a movement toward our daily life. This paper depicts the development procedure of smart appliance using wireless technology, Zigbee network. An example of developing a wireless network sensor will be given. Key WordsSmart ApplianceHome Control NetworkWireless Sensor NetworkZigBee  1Introduction During the past few years, wireless systems seem to the breeding of life. The market demand for Smart Home Appliance Control Network device is increasing. Some sensors are developed with Bluetooth, a consumer oriented technology that is designed to eliminate computer cables. Others are implemented with IEEE 802.11b, or WiFis IEEE 802.11g, these standards are proposed for the wireless LAN technology used in offices and increasingly in airports, hotels, and restaurants. In a home security system, for example, wireless sensors would be much easier to install than sensors that need wiring. This article will focus on the HomeRF technology and ZigBee is considered as the appropriate solution to implement this system. ZigBee arrived in the 2.4GHz band, joining the now IEEE 802.15 Institute of Electrical and Electronic Engineers IEEE which has two wellestablished substandards, Bluetooth and UWB Ultra Wideband UWB. ZigBee looks rather like Bluetooth but is simpler and cheaper. It has a lower data rate and spends most of its time in sleep mode. ZigBee is considered as reliable, lowpower consumption and costeffective advantages while implementing wireless systems. This characteristic means that a ZigBee network should be able to run for three months and up to one year on a pair of AAA batteries. The target of building home automation, sensor control, security and consumer electronics as the main application makes technical sense. The remainder of this paper is organized as follows. In section two, an overview of the IEEE 802.15.x Standard for WPAN Wireless Personal Area Network WPAN and the ZigBee Network Architecture will be given.   Table 1 IEEE 802.15.4 Physical Layer Frequency Band 2.4GHz 868 915 MHz Geographical Region Japan Europe USA Europe USA Data Rate 250 kbs 40 kbs Chip Rate 1 Mcs 300 600 Kcs Data 16ary orthogonal modulation Differential BPSK Channel 16 Channels 5MHz Channel separation 110 Channels 2MHz Channel separation915MHz Sensitivity 85dBm 92dBm Max. Conductive PowerRadiated field limit 10dBm 10mW 20dBm 100mW  30dBm 1000mW 14dBm 25mW 30dBm 1000mW  Table 2 IEEE 802.15.4 Data Frame Format Frame ControlSequence Number Address Info Payload Frame Check Sequence MAC Header MHR MAC MSDU MAC Footer MFR Octets 2       1         020        Variable                 2 MAC Protocol Data Unit MPDU                                           MAC Sub layer  Synchronization Heard PHY Header PHY Payload Preamble Start of Frame Delimiter Frame Length PHY Service Data Unit PSDU 4             1             1                                       0127   PHY Layer PHY Protocol Data Unit PPDU   Afterwards, the processing procedure of a ZigBee network, the core of this wireless system, will be shown. Also, the illustration of the development environment including hardware and software will be given. Section four, the home sensor network application development of the complete system is provided. The final section presents discussions and conclusions of the wireless network and its future challenges.  2Overview of Wireless Network The ZigBee standard operates in 2.4GHz band or the 868MHz or 915MHz ISM Industrial, Scientific and Medical ISM bands used in Japan, Europe and US respectively. The date rates are 250kbps at 2.4GHz and 20kbps to 40kbps in the lower frequency bandwidth. The transmission range is about 10 meters indoor and around 75 meters outdoor. In Table 1, the comparison of analyzing IEEE 802.15.4 Physical Layer with different frequency Bands is given.   21IEEE 802.15.x Standards IEEE 802.15.x Standard provides wireless connectivity among devices in a personal operating space. The 802.15.x WPAN family include 802.15.1 Bluetooth802.15.2 Bluetooth802.15.3 UWB and 802.15.4 ZigBee protocol for wireless networks. Bluetooth is an open standard for shortrange digital radio wireless connectivity. It is a small, cheap chip to be plugged into computers, printers, mice, monitors, mobile phones, and so on. UWB brings the convenience and mobility of wireless communications to highspeed interconnects in devices throughout the digital home and office. UWB is designed for shortrange WPANs, enabling wireless connection of multiple devices for transmission of video, audio and other highbandwidth data. The ZigBee is reliable, costeffective, low power consumption. The benefit of a Zigbee system is to achieve monitoring and controlling aims based on an open global standard. This wireless communications solution will be embedded in consumer electronics, home and building automation, industrial controls, PC peripherals, medical applications, and electronic toys and games. 22IEEE 802.15.4 Standard ZigBee is the integration of network, security, and application services layers, which includes the physical layer Physical Layer PHY and medium access control Medium Access Control MAC MAC layers of the IEEE 811.15.4 radio. Wireless medium access control MAC and PHY are the specifications for lowrate wireless personal area network. It provides a standard for ultralow complexity, ultralow cost, ultralow power consumption, and low data rate wireless connectivity among inexpensive devices. It will be secure for lightweight wireless communication among sensors and building automation. Table 2 is the IEEE 802.15.4 data protocol format. In the Figure 1, all of the device types within a Zigbee system, there are network coordinator, full function device FullFunction Device FFD and reduced function device ReducedFunction Device RFD. There are three types of Zigbee network topologies, StarMesh and Cluster.   Fig.1 ZigBee network  23ZigBee Network Layer of Architecture IEEE 802.15.4 working group defined the lower layers of protocol stack as MAC and PHY. First version standard was released on December 1st, 2003. Furthermore, ZigBee alliance defined the upper layer of protocol stack from network to application include application profile. Figure 2 is the Architecture of ZigBee network.  Fig.2 ZigBee network of Architecture  3ZigBee Development of Environment Zigbee module is consisting of the MCU Microprocessor Control Unit MCU, RF IC Radio Frequency Integrated Circuit RF IC, and antenna circuit. In the following Section, each development environment will be presented with more details. Figure 3   Fig 3. ZigBee 2.4 GHz Transceivers Block  31Hardware Requirement  RF transceiver is a wireless technical that is fully compliant to the IEEE 802.15.4 PHY specification. It is targeted at IEEE 802.15.4 proprietary or standards based solutions. IEEE 802.15.4 MAC is a communication protocol used for short range, low power, and low data rate wireless applications. ZigBee network supports the   Table 3 RF Transceiver Function Specification Network Topology  PeertoPeer, Star and Mesh  Transfer Mode  Packet and Streaming  Throughput  250Kbps OQPSK DSSS  Low Power Modes  Hibernate, Doze and Idle  Sensitivity  92dBm  Operating Voltage  2.0V to 3.4V  MCU Support  Optimized for 8bit HCS08 Family  MCU Interface  SPI Interface to MCU  Power Output  16.6dBm to 3.6dBmsoftware selectable Operating Temp  40 to 85F Operating Temperature Package  5x5 QFN32 Meets leadfree requirements beaconed, star, clustertree and mesh networks. Moreover, RF IC supports the guaranteed time slots Guaranteed Time Slots GTS includes the AES 128bit Encryption and uses the CSMACA Carrier Sense Multiple Access with Collision Avoidance CSMACA algorithm for coexistence mitigation. A ZigBee node that uses CSMACA is essentially taking a listenbeforetalk approach to see if any radio traffic is already underway. The RF functions are supported by the development environment with object code, and the designers can target only at the 8bit HCS08 MCU,   which is a relatively cheap and powerful MCU as it can achieve buffered transmit and receive data packets. Low component count reduces complexity and cost. The RF transceiver and MCU hardware design requirement will be illustrated in the Table 3 and Table 4.  32Association the ZigBee Network  Each ZigBee network needs at least one FFD as a controller, but most network nodes can be RFDs. RFDs can talk only with FFDs, not to other RFDs, but they contain less circuitry than FFDs, and little or no powerconsuming memory. Figure 1  Every PAN has a unique 16bit ID and a single ZigBee coordinator. For ZigBee, merging PANs after they have formed is not possible without recommissioning the two systems. The ZigBee coordinator has a special 16bit network address of 0x0000.   Table 4 MCU Requirement Item MC9S08GT60 CPU HCS08 Serial Communications 2 SCI, SPI IIC Voltage Regulator OnChip General Purpose IO Up to 36 Debug BDM OnChip FLASH 60k Bytes RAM 4k Bytes AnalogtoDigital 8Channel, 10Bit Timer 4Channel, 16Bit Clock Generator FrequencyLocked Loop  Every device has a unique 64bit MAC address. Upon association, every device receives a unique 16bit network address. Only the 16bit network address is used to route packets within the network. Devices retain their 16bit address if they disconnect from the network, however, if the leave the network, the 16bit address is reassigned. Network broadcast is implemented in the MAC  Network address 0xFFFF is the broadcast address  Special algorithm in network to propagate the message  Best Effort or Guaranteed Delivery options  Radius limited broadcast feature  33ZDO Binding API Wireless network builds and sends ZDO ZigBee Device Object ZDO binding requests and responses. All binding information tables is kept in the ZigBee Coordinator. Hence only the ZigBee Coordinator can receive binding requests. Binding manager establishes resource size for the binding table, processes bind requests, and supports bind and unbind commands from external application.  34ZStack incoming data A company named Figure 8 offers a set of development tool that contains ZStack ZigBee Protocol Stack Package and ZTool ZigBee Protocol Stack Test Tool. This tool contains the complete communications software solution for easily integrating ZigBee wireless technology onto embedded systems. Figure 8 ensures that the ZStack is fully compliant with the ZigBee protocol specification. ZStack is fully configurable, extremely portable, robust, reliable, and easy to maintain on every embedded platform.  ZStack architecture has multiplexing incoming data to endpoints. Application Framework provides 2 service types the Key Value Pair KVP and Message MSG. ZStack supports applications on Endpoints from 1255 over APS. Structure section defines the data objects used in SET and GET commands. Two messaging service types are defined the KVP commands Service and the MSG commands Service.  4Application Development Generic Application Profile  Zstack provides a single device description template and has the capability to define simple descriptions to advertise interfaces to support device discovery, service discovery and binding and utilizes all standard ZigBee platform features.  41ZigBee Profile Profile Builder is a development system that can be used to create user defined ZigBee application. It generates profile code. Accordingly, the ZigBee coordinator, routers and end devices need to follow the ZigBee Alliance standard. One reason for optimism about ZigBee adoption for home automation and security is its ease of use. the home controls sensor profile is listed below   Dimming Load Controller  Switching Load Controller  Dimming Remote Control  Switching Remote Control  Occupancy Sensor  Light Sensor Monochromatic Home Controls Lighting Profile  In the Zstack provides 6 device descriptions, each has its own sample application. This profile can be used as the sample application for designers development reference.  42ZigBee Market Future  In figure 4, it is estimated that the scale of the global market for lowspeed communication will reach 570 million in 2005 in advance, ZigBee can make heavy occupation rate of market more when the time comes, this represents the space that it can grow for sizable potentiality. The sales of 802.15.4 nodes and chipsets will increase from essentially zero to 165 million units by 2010 by depiction. Not all of these units will be coupled with ZigBee, but most probably will be reach firmly on the World predicts of 465 million wireless sensors RF modules by 2010.  0100200300400500600Unit million2003 2004 2005 YearsOther Enterprise Home Fig 4 .The global lowspeed communication uses the market Source fromABIDataquestAdcon Telemetry AGTaiwan ITRI ITIS200301  5Conclusion ZigBee is designed for high reliability, lowcost, lowpower, lowdata rate and highly secure wireless applications. ZigBee is built on the global, robust IEEE 802.15.4 radio standard. Large ZigBee ecosystems are made available today which equates to fast time to market. ZigBee, based on the HomeRF technology, is also starting to receive attentions for sensor implementation. This paper has reviewed the popular home automatic technologies, wireless sensor networks of ZigBee technologies. It is found that a wireless smart sensor network is the most important part in our life. The found gives future direction of research and development of wireless and smart sensor structures using Zigbee. It is estimated the ZigBee Network will be applied to a large amount in the home appliances, sensor network systems in the future.  Acknowledgement Special sincere appreciation would like to express to Department of Industrial Technologies, Ministry of Economic Affairs DOITMOEA with all the funding support entitled with ZigBee Technology Development for Smart Home Appliance Application in year 2005.   6Reference 1 ZigBee Alliance, httpwww.zigbee.org.  2 ZigBee Alliance, Network Specification, ZigBee Document 02130r10, December 14th, 2004. 3 ZigBee Alliance, ZigBee Application Profile. Home Control, Lighting , ZigBee Document 03540r6, December 14th, 2004. 4 ZigBee Alliance, ZigBee Device Profile, ZigBee Document 03529r7, December 14th, 2004. 5 A Chipcon Company  Figure 8 wireless, httpwww.figure8wireless.comZigbee.html 6 Freescale Semiconductor Corporation, httpwww.freescale.comzigbee 7 Chipcon, httpwww.chipcon.comindex.cfmkatid10  8 IEEE Standard Association, httpstandards.ieee.orggetieee802802.15.html9 Qingshan Shan, Ying Liu, Gareth Prossec, David Brown, Wireless Intelligent Sensor Networks for Refrigerated Vehicle, IEEE 6th CAS Symp. On Emerging Technologies Mobile and Wireless Comm. Shanghai, China, May 31June 2, 2004. 10 Hiroo Ishikawa, Yuuki Ogata, Kazuto Adachi, Tatsuo Nakajima Building Smart Appliance Integration Middleware on the OSGi Framework Proceedings of the Seventh IEEE International Symposium on ObjectOriented RealTime Distributed Computing ISORC04, 2004.  11 Bessam Abdulrazak, Mounir Mokhtari, Mohamed Ali Feki, Mahmoud Ghorbel, Integration of home network in a smart environment dedicated to people with disabilities, IEEE 2004. 12 Chris EvansPughe Is the ZigBee wireless standard, promoted by an alliance of 25 firms, a big threat to Bluetooth , IEEE Review, March 2003. 13 Wenwu Zhu Microsoft Research Asia Beijing, China, Wireless Technology and Web, IEEE 2004.  14 A. ElHoiydi, JD. Decotignie, WiseMAC An Ultra Low Power MAC Protocol for the Downlink of Infrastructure Wireless Sensor Networks, IEEE 2004.  15 Gary Legg, ZigBee Wireless Technology for LowPower Sensor Networks, TechOnLine Publication, May 6, 2004
