001891620725.00  2007 IEEE December 2007 33P u b l i s h e d  b y  t h e  I E E E  C o m p u t e r  S o c i e t yC O V E R  F E A T U R Etrends could make energy a dominant factor in the totalcost of ownership.3 Besides the server electricity bill,TCO includes other energydependent components suchas the cost of energy for the cooling infrastructure andprovisioning costs, specifically the data center infrastructures cost. To a firstorder approximation, bothcooling and provisioning costs are proportional to theaverage energy that servers consume, therefore energyefficiency improvements should benefit all energydependent TCO components.Efforts such as the Climate Savers Computing Initiativewww.climatesaverscomputing.org could help lowerworldwide computer energy consumption by promotingwidespread adoption of highefficiency power suppliesand encouraging the use of powersavings featuresalready present in users equipment. The introduction ofmore efficient CPUs based on chip multiprocessing hasalso contributed positively toward more energyefficientservers.3 However, longterm technology trends invariably indicate that higher performance means increasedenergy usage. As a result, energy efficiency must improveas fast as computing performance to avoid a significantgrowth in computers energy footprint.SERVERS VERSUS LAPTOPSMany of the lowpower techniques developed formobile devices directly benefit generalpurpose servers,including multiple voltage planes, an array of energyefficient circuit techniques, clock gating, and dynamicEnergyproportional designs would enable large energy savings in servers, potentially doubling their efficiency in reallife use. Achieving energy proportionality will requiresignificant improvements in the energy usage profile of every system component,particularly the memory and disk subsystems.Luiz Andr Barroso and Urs HlzleGoogleE nergy efficiency, a new focus for generalpurposecomputing, has been a major technology driverin the mobile and embedded areas for some time.Earlier work emphasized extending battery life,but it has since expanded to include peak powerreduction because thermal constraints began to limit further CPU performance improvements.Energy management has now become a key issue forservers and data center operations, focusing on thereduction of all energyrelated costs, including capital,operating expenses, and environmental impacts. Manyenergysaving techniques developed for mobile devicesbecame natural candidates for tackling this new problemspace. Although servers clearly provide many parallelsto the mobile space, we believe that they require additional energyefficiency innovations.In current servers, the lowest energyefficiency regioncorresponds to their most common operating mode.Addressing this mismatch will require significantrethinking of components and systems. To that end, wepropose that energy proportionality should become aprimary design goal. Although our experience in theserver space motivates these observations, we believethat energyproportional computing also will benefitother types of computing devices.DOLLARS  CO2Recent reports1,2 highlight a growing concern withcomputerenergy consumption and show how currentThe Case for EnergyProportionalComputing34 Computervoltagefrequency scaling. Mobile devices require highperformance for short periods while the user awaits aresponse, followed by relatively long idle intervals ofseconds or minutes. Many embedded computers, suchas sensor network agents, present a similar bimodalusage model.4This kind of activity pattern steers designers to emphasize high energy efficiency at peak performance levelsand in idle mode, supporting inactive lowenergy states,such as sleep or standby, that consume nearzero energy.However, the usage model for servers, especially thoseused in largescale Internet services, has very differentcharacteristics.Figure 1 shows the distribution of CPU utilization levels for thousands of servers during a sixmonth interval.5 Although the actual shape of the distribution variessignificantly across services, two key observations fromFigure 1 can be generalized Servers are rarely completely idle and seldom operate near their maximum utilization. Instead, servers operate most of the time atbetween 10 and 50 percent of their maximum utilization levels. Such behavior is not accidental, but resultsfrom observing sound service provisioning and distributed systems design principles.An Internet service provisioned such that the averageload approaches 100 percent will likely have difficultymeeting throughput and latency servicelevel agreements because minor traffic fluctuations or any internal disruption, such as hardware orsoftware faults, could tip it overthe edge. Moreover, the lack of areasonable amount of slackmakes regular operationsexceedingly complex becauseany maintenance task has thepotential to cause serious servicedisruptions. Similarly, wellprovisioned services are unlikely tospend significant amounts oftime completely idle becausedoing so would represent a substantial waste of capital.Even during periods of low service demand, servers are unlikelyto be fully idle. Largescale services usually require hundreds ofservers and distribute the loadover these machines. In somecases, it might be possible tocompletely idle a subset of serversduring lowactivity periods by,for example, shrinking the number of active front ends. Often,though, this is hard to accomplish because data, not just computation, is distributed among machines. For example,common practice calls for spreading user data acrossmany databases to eliminate the bottleneck that a central database holding all users poses. Spreading data across multiple machines improvesdata availability as well because it reduces the likelihood that a crash will cause data loss. It can also helphasten recovery from crashes by spreading the recovery load across a greater number of nodes, as is donein the Google File System.6 As a result, all servers mustbe available, even during lowload periods. In addition,networked servers frequently perform many small background tasks that make it impossible for them to entera sleep state.  With few windows of complete idleness, servers cannot take advantage of the existing inactive energysavings modes that mobile devices otherwise find soeffective. Although developers can sometimes restructure applications to create useful idle intervals duringperiods of reduced load, in practice this is often difficultand even harder to maintain. The Tickless kernel7 exemplifies some of the challenges involved in creating andmaintaining idleness. Moreover, the most attractive inactive energysavings modes tend to be those with the highest wakeup penalties, such as disk spinup time, andthus their use complicates application deployment andgreatly reduces their practicality.1.000.010.0050.020.030.0150.025CPU utilizationFraction of time0.90.80.70.60.50.40.30.20.10Figure 1. Average CPU utilization of more than 5,000 servers during a sixmonth period.Servers are rarely completely idle and seldom operate near their maximum utilization,instead operating most of the time at between 10 and 50 percent of their maximum utilization levels.December 2007 35understand the key challenges for achieving energy proportionality. Figure 3 shows the fraction of total serverpower consumed by the CPU in two generations ofGoogle servers built in 2005 and 2007. The CPU no longer dominates platform power atpeak usage in modern servers, and since processors areadopting energyefficiency techniques more aggressively than other system components, we would expectCPUs to contribute an even smaller fraction of peakpower in future systems. Comparing the second andthird bars in Figure 3 provides useful insights. In thesame platform, the 2007 server, the CPU represents aneven smaller fraction of total power when the systemENERGY EFFICIENCY AT VARYINGUTILIZATION LEVELSServer power consumption respondsdifferently to varying utilization levels.We loosely define utilization as a measure of the application performancesuch as requests per second on a Webservernormalized to the performance at peak load levels. Figure 2shows the power usage of a typicalenergyefficient server, normalized toits maximum power, as a function ofutilization. Essentially, even an energyefficient server still consumes abouthalf its full power when doing virtually no work. Servers designed withless attention to energy efficiency oftenidle at even higher power levels.Seeing the effect this narrow dynamicpower range has on such a systemsenergy efficiencyrepresented by thered curve in Figure 2is both enlightening and discouraging. To derivepower efficiency, we simply divide utilization by its corresponding power value. We see that peak energy efficiency occurs at peak utilization and drops quickly asutilization decreases. Notably, energy efficiency in the 20to 30 percent utilization rangethe point at whichservers spend most of their timehas dropped to lessthan half the energy efficiency at peak performance.Clearly, such a profile matches poorly with the usagecharacteristics of serverclass applications.TOWARD ENERGYPROPORTIONAL MACHINESAddressing the mismatch between the serversenergyefficiency characteristics and the behavior ofserverclass workloads is primarily the responsibilityof component and system designers. They should aimto develop machines that consume energy in proportion to the amount of work performed. Such energyproportional machines would ideally consume nopower when idle easy with inactive power modes,nearly no power when very little work is performedharder, and gradually more power as the activity levelincreases also harder. Energyproportional machines would exhibit a widedynamic power rangea property that might be raretoday in computing equipment but is not unprecedentedin other domains. Humans, for example, have an average daily energy consumption approaching that of anold personal computer about 120 W. However, humansat rest can consume as little as 70 W,8 while being ableto sustain peaks of well over 1 kW for tens of minutes,with elite athletes reportedly approaching 2 kW.9Breaking down server power consumption into itsmain components can be useful in helping to better1000201040608030507090100Utilization percentServer power usage percent of peak9080706050403020100PowerEnergy efficiencyTypical operating regionFigure 2. Server power usage and energy efficiency at varying utilization levels,from idle to peak performance. Even an energyefficient server still consumesabout half its full power when doing virtually no work.02010406030502005 serverpeak2007 serverpeak2007 serveridleGoogle serversCPU contribution to server powerFigure 3. CPU contribution to total server power for two generations of Google servers at peak performance the first twobars and for the later generation at idle the rightmost bar.36 ComputerCompared to todays machines,servers with a dynamic power range of90 percent, shown in Figure 4, could cutby onehalf the energy used in data center operations.5 They would also lowerpeak power at the facility level by morethan 30 percent, based on simulationsof realworld data center workloads.These are dramatic improvements,especially considering that they arisefrom optimizations that leave peakserver power unchanged. The powerefficiency curve in Figure 4 fundamentally explains these gains. This serverhas a power efficiency of more than 80percent of its peak value for utilizationsof 30 percent and above, with efficiencyremaining above 50 percent for utilization levels as low as 10 percent. In addition to its energysavingspotential, energyproportional hardware could obviate the need for powermanagement software, or at least simplify it substantially, reducing powermanagement to managing utilization.Fundamentally, the latency and energy penaltiesincurred to transition to the active state when startingan operation make an inactive energysavings mode lessuseful for servers. For example, a disk drive in a spundown, deepsleep state might use almost no energy, buta transition to active mode incurs a latency penalty 1,000times higher than a regular access latency. Spinning upthe platters also carriers a large energy penalty. Such ahuge activation penalty restricts spindown modes to situations in which the device will be idle for several minutes this rarely occurs in servers. On the other hand,inactive energysavings modes with wakeup penaltiesof only a small fraction of the regular operations latencyare more likely to benefit the server space, even if theirlowenergy state operates at relatively higher energy levels than would be possible in deepsleep modes.Active energysavings schemes, by contrast, are usefuleven when the latency and energy penalties to transitionto a highperformance mode are significant. Since activemodes are operational, systems can remain in lowenergy states for as long as they remain below certainload thresholds. Given that periods of low activity aremore common and longer than periods of full idleness,the overheads of transitioning between active energysavings modes amortize more effectively.S ervers and desktop computers benefit from muchof the energyefficiency research and developmentthat was initially driven by mobile devices needs.However, unlike mobile devices, which idle for long is idle, suggesting that processors are closer to exhibiting the energyproportional behavior we seek.Two key CPU features are particularly useful forachieving energy proportionality and are worthy of imitation by other components.Wide dynamic power rangeCurrent desktop and server processors can consumeless than onethird of their peak power at verylow activity modes, creating a dynamic range of more than 70percent of peak power. CPUs targeted at the mobile orembedded markets can do even better, with idle poweroften reaching onetenth or less of peak power.10 Theyachieve this even when not using any performanceimpactingor softwarevisibleenergysaving modes.In our experience, the dynamic power range of allother components is much narrower less than 50 percent for DRAM, 25 percent for disk drives, and 15 percent for networking switches.Active lowpower modesA processor running at a lower voltagefrequency modecan still execute instructions without requiring a performanceimpacting mode transition. It is still active. Thereare no other components in the system with active lowpower modes. Networking equipment rarely offers anylowpower modes, and the only lowpower modes currently available in mainstream DRAM and disks are fullyinactive. That is, using the device requires paying a latencyand energy penalty for an inactivetoactive mode transition. Such penalties can significantly degrade the performance of systems idle only at submillisecond time scales.1000201040608030507090100Utilization percentServer power usage percent of peak9080706050403020100PowerEnergy efficiencyTypical operating regionFigure 4. Power usage and energy efficiency in a more energyproportional server.This server has a power efficiency of more than 80 percent of its peak value for utilizations of 30 percent and above, with efficiency remaining above 50 percentfor utilization levels as low as 10 percent.periods, servers spend most of their time at moderate utilizations of 10 to 50 percent and exhibit poor efficiencyat these levels. Energyproportional computers wouldenable large additional energy savings, potentially doubling the efficiency of a typical server. Some CPUs alreadyexhibit reasonably energyproportional profiles, but mostother server components do not. We need significant improvements in memory and disksubsystems, as these components are responsible for an increasing fraction of the system energy usage.Developers should make better energy proportionalitya primary design objective for future components andsystems. To this end, we urge energyefficiency benchmark developers to report measurements at nonpeakactivity levels for a more complete characterization of asystems energy behavior. AcknowledgmentsWe thank Xiaobo Fan and WolfDietrich Weber forcoauthoring the power provisioning study that motivated this work, and Catherine Warner for her comments on the manuscript.References1. US Environmental Protection Agency, Report to Congresson Server and Data Center Energy Efficiency Public Law 109431 www.energystar.goviapartnersproddevelopmentdownloadsEPADatacenterReportCongressFinal1.pdf.2. J.G. Koomey, Estimating Total Power Consumption byServers in the U.S. and the World httpenterprise.amd.comDownloadssvrpwrusecompletefinal.pdf.3. L.A. Barroso, The Price of Performance An Economic Casefor Chip Multiprocessing, ACM Queue, Sept. 2005, pp. 4853.4. J. Hill et al., System Architecture Directions for NetworkedSensors, Proc. SIGOPS Oper. Syst. Rev., ACM Press, vol.34, no. 5, 2000, pp. 93104.5. X. Fan, W.D. Weber, and L.A. Barroso, Power Provisioningfor a WarehouseSized Computer httpresearch.google.comarchivepowerprovisioning.pdf.6. S. Ghemawat, H. Gobioff and S.T. Leung, The Google FileSystem www.cs.rochester.edumeetingssosp2003papersp125ghemawat.pdf.7. S. Siddha, V. Pallipadi,  and A. Van De Ven, Getting Maximum Mileage Out of Tickless, Proc. 2007 Linux Symp.,2007, pp. 201208.8. E. Ravussin et al., Determinants of 24Hour Energy Expenditure in Man Methods and Results Using a RespiratoryChamber httpwww.pubmedcentral.nih.govpicrender.fcgiartid423919blobtypepdf.9. E.F. Coyle, Improved Muscular Efficiency Displayed as Tourde France Champion Matures httpjap.physiology.orgcgireprint9862191.10. Z. Chen et al., A 25Wmax SoC with Dual 2GHz PowerCores and Integrated Memory and IO Subsystems www.pasemi.comdownloadsPASemiISSCC2007.pdf.Luiz Andr Barroso is a distinguished engineer at Google.His interests range from distributed system software infrastructure to the design of Googles computing platform.Barroso received a PhD in computer engineering from theUniversity of Southern California. Contact him at luizgoogle.com.Urs Hlzle is the senior vice president of operations atGoogle and a Google Fellow. His interests include largescale clusters, cluster networking, Internet performance,and data center design.  Hlzle received a PhD in computerscience from Stanford University. Contact him at ursgoogle.com.December 2007 37Computer Wants You Computer is always looking for interesting editorial content. Inaddition to our theme articles, wehave other feature sections such asPerspectives, Computing Practices,and Research Features as well asnumerous columns to which you cancontribute. Check out our authorguidelines at www.computer.orgcomputerauthor.htmfor more information about how tocontribute to your magazine.
